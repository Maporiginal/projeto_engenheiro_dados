-- 03_mysql_vendas_orders.sql
-- MySQL init: database vendas + tabelas orders e order_items (50 pedidos + 50 itens)

CREATE DATABASE IF NOT EXISTS vendas;
USE vendas;

CREATE TABLE IF NOT EXISTS orders (
  order_id        INT NOT NULL AUTO_INCREMENT,
  customer_id     CHAR(36) NOT NULL,
  order_ts        DATETIME NOT NULL,
  status          VARCHAR(20) NOT NULL,
  total           DECIMAL(12,2) NOT NULL,
  currency        CHAR(3) NOT NULL DEFAULT 'BRL',
  payment_method  VARCHAR(30),
  sales_channel   VARCHAR(30),
  PRIMARY KEY (order_id),
  INDEX idx_orders_customer_ts (customer_id, order_ts)
);

CREATE TABLE IF NOT EXISTS order_items (
  order_item_id INT NOT NULL AUTO_INCREMENT,
  order_id      INT NOT NULL,
  sku           VARCHAR(40) NOT NULL,
  product_name  VARCHAR(160) NOT NULL,
  quantity      INT NOT NULL,
  unit_price    DECIMAL(12,2) NOT NULL,
  line_total    DECIMAL(12,2) NOT NULL,
  PRIMARY KEY (order_item_id),
  INDEX idx_items_order (order_id)
);

-- Seed (50 pedidos)
INSERT INTO orders
  (order_id, customer_id, order_ts, status, total, currency, payment_method, sales_channel)
VALUES
  (1, '072dcd5d-45f7-5587-94cc-0fa36325f9c8', '2025-09-05 15:00:00', 'PAID', '1073.88', 'BRL', 'DEBIT_CARD', 'APP'),
  (2, 'fd3b1473-b204-5c85-b3b0-b146f9734021', '2025-09-03 22:00:00', 'PAID', '899.92', 'BRL', 'PIX', 'MARKETPLACE'),
  (3, 'a6297394-0650-538f-a073-9f9b47d567de', '2025-08-27 19:00:00', 'PAID', '1518.66', 'BRL', 'PIX', 'SITE'),
  (4, '1525ca83-90fc-57f1-a4b9-c05fd0c79661', '2025-08-09 12:00:00', 'PAID', '2548.12', 'BRL', 'PIX', 'MARKETPLACE'),
  (5, 'e1353ad4-af1e-5650-af94-9c1ee0004d51', '2025-10-03 11:00:00', 'DELIVERED', '531.35', 'BRL', 'PIX', 'SITE'),
  (6, '0ca444f2-f748-5fbe-be16-1c42fcfa2056', '2025-11-25 19:00:00', 'PROCESSING', '543.09', 'BRL', 'DEBIT_CARD', 'APP'),
  (7, 'dbf91a13-df0c-5e29-8fab-aabab9a574b2', '2025-09-01 10:00:00', 'DELIVERED', '721.70', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (8, 'e3d53058-358c-5e1d-8bfc-2a62adb0a896', '2025-07-11 14:00:00', 'SHIPPED', '108.21', 'BRL', 'BOLETO', 'SITE'),
  (9, 'fd3b1473-b204-5c85-b3b0-b146f9734021', '2025-11-03 10:00:00', 'PAID', '812.10', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (10, '39485023-3f9c-5c5d-b88d-25aafe0879e1', '2025-11-11 19:00:00', 'PAID', '921.06', 'BRL', 'DEBIT_CARD', 'APP'),
  (11, '87caccff-be5c-5876-96b6-f8d341b4ad06', '2025-07-23 13:00:00', 'DELIVERED', '1277.40', 'BRL', 'CREDIT_CARD', 'APP'),
  (12, '2bd5796e-f218-55e0-92f7-f44888a5c97a', '2025-09-22 11:00:00', 'CANCELED', '0.00', 'BRL', 'BOLETO', 'APP'),
  (13, 'a95cc9e3-0e00-5382-86bd-8762b5743521', '2025-09-09 17:00:00', 'PAID', '1810.04', 'BRL', 'CREDIT_CARD', 'SITE'),
  (14, '537e6ec7-ce6e-541c-a617-79277c9e4e8d', '2025-08-31 20:00:00', 'CANCELED', '0.00', 'BRL', 'DEBIT_CARD', 'APP'),
  (15, '42203d84-66ac-5ece-915c-8bad7b55f5ac', '2025-09-01 13:00:00', 'DELIVERED', '1191.96', 'BRL', 'BOLETO', 'APP'),
  (16, '5a00f1b7-1b60-56ff-9b8b-9d2d3e99d43d', '2025-11-18 14:00:00', 'PAID', '680.16', 'BRL', 'DEBIT_CARD', 'APP'),
  (17, '39485023-3f9c-5c5d-b88d-25aafe0879e1', '2025-08-19 14:00:00', 'PAID', '1067.76', 'BRL', 'CREDIT_CARD', 'SITE'),
  (18, '278043af-65c0-5bed-81c7-da7de17318e4', '2025-11-12 18:00:00', 'PAID', '681.54', 'BRL', 'PIX', 'SITE'),
  (19, '0ca444f2-f748-5fbe-be16-1c42fcfa2056', '2025-07-04 20:00:00', 'SHIPPED', '1905.72', 'BRL', 'BOLETO', 'SITE'),
  (20, '73dbb2b2-6cc0-5f55-a55b-34a2ed3910e1', '2025-12-11 22:00:00', 'DELIVERED', '1307.16', 'BRL', 'PIX', 'SITE'),
  (21, 'bce98c5a-b632-522d-a654-68c70a00dc1e', '2025-09-26 11:00:00', 'PROCESSING', '375.62', 'BRL', 'BOLETO', 'APP'),
  (22, '7a556456-f424-5d9a-bac4-443dd7ac7ff3', '2025-11-25 19:00:00', 'DELIVERED', '298.59', 'BRL', 'CREDIT_CARD', 'SITE'),
  (23, '87caccff-be5c-5876-96b6-f8d341b4ad06', '2025-07-31 17:00:00', 'DELIVERED', '3279.76', 'BRL', 'CREDIT_CARD', 'MARKETPLACE'),
  (24, '0ca444f2-f748-5fbe-be16-1c42fcfa2056', '2025-11-28 15:00:00', 'PAID', '1144.66', 'BRL', 'PIX', 'MARKETPLACE'),
  (25, '5e650e72-894a-5f91-bccd-24d659e13a2a', '2025-07-21 11:00:00', 'PAID', '1676.76', 'BRL', 'PIX', 'SITE'),
  (26, '3d20e1d0-8309-572e-9a6f-0de23c2e7d9e', '2025-10-29 13:00:00', 'PAID', '349.12', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (27, '26cb129a-b2b9-5b7b-9497-37afb473cb8d', '2025-09-06 21:00:00', 'DELIVERED', '1183.36', 'BRL', 'CREDIT_CARD', 'APP'),
  (28, '346835d3-0c85-5a3c-8a75-0cd379aa1217', '2025-08-06 10:00:00', 'PAID', '1227.78', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (29, 'd7365ceb-114d-58ff-a89a-850e3db2bfca', '2025-09-16 20:00:00', 'PAID', '1632.16', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (30, '3d20e1d0-8309-572e-9a6f-0de23c2e7d9e', '2025-07-11 23:00:00', 'PAID', '104.91', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (31, 'c932a17f-3343-5d42-9c13-8ec5f237bd8c', '2025-11-25 18:00:00', 'PROCESSING', '873.38', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (32, '193668ae-2f42-57a0-98a2-ecbd490e5887', '2025-10-22 23:00:00', 'PAID', '436.26', 'BRL', 'DEBIT_CARD', 'MARKETPLACE'),
  (33, 'fd3b1473-b204-5c85-b3b0-b146f9734021', '2025-09-24 14:00:00', 'DELIVERED', '1108.76', 'BRL', 'CREDIT_CARD', 'APP'),
  (34, '42203d84-66ac-5ece-915c-8bad7b55f5ac', '2025-11-18 09:00:00', 'CANCELED', '0.00', 'BRL', 'BOLETO', 'APP'),
  (35, '42203d84-66ac-5ece-915c-8bad7b55f5ac', '2025-11-09 22:00:00', 'PROCESSING', '957.26', 'BRL', 'DEBIT_CARD', 'APP'),
  (36, '1525ca83-90fc-57f1-a4b9-c05fd0c79661', '2025-11-05 19:00:00', 'PAID', '1673.42', 'BRL', 'PIX', 'SITE'),
  (37, 'bce98c5a-b632-522d-a654-68c70a00dc1e', '2025-11-02 10:00:00', 'PAID', '1520.94', 'BRL', 'CREDIT_CARD', 'MARKETPLACE'),
  (38, '8ac6788a-c0c1-5dd0-88b2-2b9a628d7be1', '2025-10-13 10:00:00', 'PAID', '922.16', 'BRL', 'PIX', 'APP'),
  (39, 'f788dae8-3f5c-562f-9cf1-9dedcfc1f27b', '2025-09-13 17:00:00', 'DELIVERED', '849.38', 'BRL', 'DEBIT_CARD', 'APP'),
  (40, 'facf3687-dbe1-5ade-b6a9-aabce8511c18', '2025-10-07 12:00:00', 'PROCESSING', '1289.56', 'BRL', 'CREDIT_CARD', 'SITE'),
  (41, 'a1e74943-5f01-5bbb-a1e3-9ef3875d837f', '2025-09-07 22:00:00', 'PAID', '3128.40', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (42, 'bce98c5a-b632-522d-a654-68c70a00dc1e', '2025-11-15 16:00:00', 'PAID', '1766.36', 'BRL', 'DEBIT_CARD', 'APP'),
  (43, '87caccff-be5c-5876-96b6-f8d341b4ad06', '2025-11-24 15:00:00', 'PAID', '2568.28', 'BRL', 'DEBIT_CARD', 'SITE'),
  (44, 'bf329c1d-7ccf-59ea-8e10-2ebcc65ad553', '2025-10-07 19:00:00', 'DELIVERED', '929.00', 'BRL', 'CREDIT_CARD', 'APP'),
  (45, '278043af-65c0-5bed-81c7-da7de17318e4', '2025-09-23 22:00:00', 'PAID', '153.72', 'BRL', 'DEBIT_CARD', 'SITE'),
  (46, 'facf3687-dbe1-5ade-b6a9-aabce8511c18', '2025-10-13 22:00:00', 'DELIVERED', '963.72', 'BRL', 'CREDIT_CARD', 'SITE'),
  (47, 'a95cc9e3-0e00-5382-86bd-8762b5743521', '2025-10-10 19:00:00', 'PAID', '3439.48', 'BRL', 'BOLETO', 'MARKETPLACE'),
  (48, 'dbf91a13-df0c-5e29-8fab-aabab9a574b2', '2025-11-02 22:00:00', 'SHIPPED', '1356.84', 'BRL', 'PIX', 'SITE'),
  (49, 'ddd81c75-d827-52a5-9e57-12343178bf24', '2025-07-26 21:00:00', 'DELIVERED', '2446.50', 'BRL', 'PIX', 'APP'),
  (50, '190408ca-eb78-557c-a20b-dc28d3e7853f', '2025-09-22 21:00:00', 'PAID', '477.34', 'BRL', 'BOLETO', 'APP')
ON DUPLICATE KEY UPDATE
  customer_id = VALUES(customer_id);

-- Seed (50 itens; 1 item por pedido)
INSERT INTO order_items
  (order_id, sku, product_name, quantity, unit_price, line_total)
VALUES
  (1, 'SKU-3001', 'Garrafa térmica', 4, '268.47', '1073.88'),
  (2, 'SKU-5001', 'Café especial 1kg', 1, '899.92', '899.92'),
  (3, 'SKU-2001', 'Camiseta básica', 2, '759.33', '1518.66'),
  (4, 'SKU-2001', 'Camiseta básica', 4, '637.03', '2548.12'),
  (5, 'SKU-2002', 'Tênis esportivo', 1, '531.35', '531.35'),
  (6, 'SKU-2001', 'Camiseta básica', 1, '543.09', '543.09'),
  (7, 'SKU-6001', 'Monitor 24 pol', 1, '721.70', '721.70'),
  (8, 'SKU-5001', 'Café especial 1kg', 3, '36.07', '108.21'),
  (9, 'SKU-4001', 'Livro técnico', 2, '406.05', '812.10'),
  (10, 'SKU-3002', 'Mochila urbana', 3, '307.02', '921.06'),
  (11, 'SKU-6001', 'Monitor 24 pol', 4, '319.35', '1277.40'),
  (12, 'SKU-3001', 'Garrafa térmica', 3, '795.28', '2385.84'),
  (13, 'SKU-2001', 'Camiseta básica', 4, '452.51', '1810.04'),
  (14, 'SKU-1001', 'Mouse sem fio', 1, '282.46', '282.46'),
  (15, 'SKU-5001', 'Café especial 1kg', 3, '397.32', '1191.96'),
  (16, 'SKU-2002', 'Tênis esportivo', 3, '226.72', '680.16'),
  (17, 'SKU-2001', 'Camiseta básica', 4, '266.94', '1067.76'),
  (18, 'SKU-2002', 'Tênis esportivo', 2, '340.77', '681.54'),
  (19, 'SKU-1001', 'Mouse sem fio', 3, '635.24', '1905.72'),
  (20, 'SKU-6001', 'Monitor 24 pol', 3, '435.72', '1307.16'),
  (21, 'SKU-1002', 'Teclado mecânico', 1, '375.62', '375.62'),
  (22, 'SKU-6001', 'Monitor 24 pol', 3, '99.53', '298.59'),
  (23, 'SKU-3002', 'Mochila urbana', 4, '819.94', '3279.76'),
  (24, 'SKU-1002', 'Teclado mecânico', 2, '572.33', '1144.66'),
  (25, 'SKU-1001', 'Mouse sem fio', 4, '419.19', '1676.76'),
  (26, 'SKU-2002', 'Tênis esportivo', 4, '87.28', '349.12'),
  (27, 'SKU-1002', 'Teclado mecânico', 2, '591.68', '1183.36'),
  (28, 'SKU-6001', 'Monitor 24 pol', 3, '409.26', '1227.78'),
  (29, 'SKU-5001', 'Café especial 1kg', 4, '408.04', '1632.16'),
  (30, 'SKU-2002', 'Tênis esportivo', 1, '104.91', '104.91'),
  (31, 'SKU-1001', 'Mouse sem fio', 2, '436.69', '873.38'),
  (32, 'SKU-4001', 'Livro técnico', 1, '436.26', '436.26'),
  (33, 'SKU-3002', 'Mochila urbana', 4, '277.19', '1108.76'),
  (34, 'SKU-3001', 'Garrafa térmica', 1, '873.91', '873.91'),
  (35, 'SKU-1001', 'Mouse sem fio', 2, '478.63', '957.26'),
  (36, 'SKU-2002', 'Tênis esportivo', 2, '836.71', '1673.42'),
  (37, 'SKU-1003', 'Headset gamer', 3, '506.98', '1520.94'),
  (38, 'SKU-1002', 'Teclado mecânico', 2, '461.08', '922.16'),
  (39, 'SKU-4001', 'Livro técnico', 2, '424.69', '849.38'),
  (40, 'SKU-2002', 'Tênis esportivo', 4, '322.39', '1289.56'),
  (41, 'SKU-6001', 'Monitor 24 pol', 4, '782.10', '3128.40'),
  (42, 'SKU-3001', 'Garrafa térmica', 2, '883.18', '1766.36'),
  (43, 'SKU-3001', 'Garrafa térmica', 4, '642.07', '2568.28'),
  (44, 'SKU-1001', 'Mouse sem fio', 2, '464.50', '929.00'),
  (45, 'SKU-5001', 'Café especial 1kg', 4, '38.43', '153.72'),
  (46, 'SKU-4001', 'Livro técnico', 3, '321.24', '963.72'),
  (47, 'SKU-5001', 'Café especial 1kg', 4, '859.87', '3439.48'),
  (48, 'SKU-2002', 'Tênis esportivo', 2, '678.42', '1356.84'),
  (49, 'SKU-1003', 'Headset gamer', 3, '815.50', '2446.50'),
  (50, 'SKU-3002', 'Mochila urbana', 2, '238.67', '477.34');
